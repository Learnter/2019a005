{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?ee97","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?af08","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?5e1d","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?97f3","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?3d58","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue?3edc"],"names":["data","productId","detailInfo","specClass","specSelected","buyNum","specPriceData","onLoad","e","id","fetchData","computed","goodsSpec","forEach","item","push","join","specPrice","methods","url","$Request","get","then","res","code","goodsInfo","spec_data","child","selected","toggleSpec","setTimeout","selectSpec","childIndex","childId","parentIndex","list","$set","childItem","buyCount","insertCart","goods_id","buy_num","goods_spec","post","uni","showToast","title","msg","icon","buyNow","userInfo","$SysCache","token","showModal","content","success","confirm","redirectTo","cancel","switchTab","stopPrevent","components","uniIcon","uniNumberBox"],"mappings":"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","file":"pages/category/detail/detail.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import uniIcon from '@/components/uni-icon/uni-icon.vue';\n  import uniNumberBox from '@/components/uni-number-box/uni-number-box.vue';\n  export default {\n    data() {\n      return {\n        productId:\" \", //产品Id\n        detailInfo:\" \", //页面数据 \n        specClass: 'none', //遮罩层切换\n        specSelected:[], //产品规格\n        buyNum:1, //购买数量,\n        specPriceData:{} //规格价格\n      };\n    },\n    onLoad(e){\n      this.productId = e.id;\n      this.fetchData(); \n    },\n    computed:{\n      /* 缓存购买的产品规格*/\n      goodsSpec(){\n        let goodsSpec = [];\n        this.specSelected.forEach(item => {\n          goodsSpec.push(item.id);\n        })\n       return goodsSpec.join(\"_\");\n      },\n      /*遮罩层 产品规格变换渲染不同的价格 及 库存*/\n      specPrice(){   \n       let specPrice  = this.specPriceData[this.goodsSpec];\n       return specPrice;\n      }\n    },\n    methods:{\n      //获取详情页面数据\n      fetchData(){\n        let url = \"goods/detail\";\n        let data = {\n          id:this.productId\n        }  \n        this.$Request.get(url,data).then( res => {\n          \n          if(res && res.code == 200 && res.data ){\n            \n            this.detailInfo = res.data.goodsInfo;\n            \n            /* 规格价格信息*/\n            this.specPriceData = res.data.specPriceData;\n            \n            /* 获取产品规格的初始值*/\n            res.data.goodsInfo.spec_data.forEach(item => {\n                item.child[0].selected = true;\n                this.specSelected.push(item.child[0]);\n            })\n          }\n        })\n      },\n      //规格弹窗开关\n      toggleSpec() {\n      \tif(this.specClass === 'show'){\n      \t\tthis.specClass = 'hide';\n      \t\tsetTimeout(() => {\n      \t\t\tthis.specClass = 'none';\n      \t\t}, 250);\n      \t}else if(this.specClass === 'none'){\n      \t\tthis.specClass = 'show';\n      \t}\n      },\n      //选择规格\n      selectSpec(childIndex,childId,parentIndex){\n         \n       let list = this.detailInfo.spec_data[parentIndex].child;\n\n\t\t\t\t// 按钮点击切换\n        list.forEach( item => {\n           item.id === childId ? this.$set(item,'selected',true) : this.$set(item,'selected',false);\n        })\n\t\t\t\t\n\t\t\t\t//存储已选择\n\t\t\t\t// 每次点击按钮 先清空specSelected  再遍历child中selected为true的对象  添加到specSelected数组中\n\t\t\t\tthis.specSelected = []; \n\t\t\t\tthis.detailInfo.spec_data.forEach(item=>{ \n\t\t\t\t\titem.child.forEach( childItem => {\n\t\t\t\t\t\t if(childItem.selected === true){\n\t\t\t\t\t\t\t \tthis.specSelected.push(childItem); \n\t\t\t\t\t\t }\n\t\t\t\t\t})\n\t\t\t\t})\n      },\n\t\t\t//选择购买数量\n\t\t\tbuyCount(e){\n\t\t\t\tthis.buyNum = e ;\n\t\t\t},\n\t\t\t//加入购物车\n\t\t\tinsertCart(){\n\n        let url = \"cart/addCart\";\n        let data = {\n          goods_id:this.productId, \n          buy_num:this.buyNum,\n          goods_spec:this.goodsSpec\n        }\n        \n        this.$Request.post(url,data).then( res => {\n          if(res && res.code == 200){\n            uni.showToast({\n              title:res.msg,\n              icon:\"success\"\n            })\n          }\n        })\n\t\t\t},\n      //立即购买\n      buyNow(){\n        let userInfo =  this.$SysCache.get(\"app_user_info\");\n        if(!userInfo.token){\n          uni.showModal({\n            content:\"请先登录\",\n            success: function (res) {\n                if (res.confirm) {\n                   uni.redirectTo({\n                     url: '/pages/login/login'\n                   });\n                } else if (res.cancel) {\n                   return;\n                }\n            }\n          })\n        }else{\n          uni.switchTab({\n            url:\"/pages/tabBar/shCart/shCart\"\n          })\n        }\n      },\n      stopPrevent(){}\n    },\n    components:{\n      uniIcon,\n      uniNumberBox\n    }\n  }\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=0eceec2b&scoped=true&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=0eceec2b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0eceec2b\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0eceec2b', component.options)\n    } else {\n      api.reload('0eceec2b', component.options)\n    }\n    module.hot.accept(\"./detail.vue?vue&type=template&id=0eceec2b&scoped=true&\", function () {\n      api.rerender('0eceec2b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/category/detail/detail.vue\"\nexport default component.exports","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&id=0eceec2b&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&id=0eceec2b&lang=scss&scoped=true&\"","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./detail.vue?vue&type=template&id=0eceec2b&scoped=true&\""],"sourceRoot":""}