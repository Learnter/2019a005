{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?ca53","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?8c4a","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?0059","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?3e9a","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?ce6c","webpack:///C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue?edde"],"names":["components","uniNumberBox","data","sumPrice","headerPosition","headerTop","statusTop","isAllselected","theIndex","oldIndex","isStop","goodsList","selectedList","onLoad","fetchData","computed","seleCount","count","forEach","item","goods_list","child","selected","push","length","methods","url","$Request","get","then","res","code","cartList","joinGoods","goods","len","isFind","i","row","id","number","unshift","touchStart","index","event","touches","initXY","pageX","pageY","touchMove","moveX","moveY","Math","abs","setTimeout","touchEnd","$event","toConfirmation","tmpList","childItem","uni","showToast","title","icon","setStorage","key","success","navigateTo","deleteGoods","storeIndex","goodsItem","post","msg","splice","del","indexOf","sum","allSelect","every","selectedStore","storeSelecte","sub","li","goods_num","add","goods_price","discard"],"mappings":"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","file":"pages/tabBar/shCart/shCart.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import uniNumberBox from '@/components/uni-number-box/uni-number-box.vue';\n  export default {\n    components: {\n      uniNumberBox\n    },\n    data() {\n      return {\n        sumPrice: '0.00',\n        headerPosition: \"fixed\",\n        headerTop: null,\n        statusTop: null,\n        isAllselected: false,\n        theIndex: null, //控制滑动效果\n        oldIndex: null,\n        isStop: false,\n        goodsList: [],//购物车商品数据\n        selectedList:[]\n      }\n    },\n    onLoad() {\n      //兼容H5下结算条位置\n\n\n\n\n\n\n      this.fetchData();\n      \n    },\n    computed:{\n      //返回选择的商品的数量\n      seleCount(){\n       let count = [] \n       this.goodsList.forEach( item => {\n          item.goods_list.forEach( child => {\n            if(child.selected == true){\n              count.push(child);\n            }   \n          })\n        })\n       return count.length;\n      }\n    },\n    methods: {\n      //获取购物车数据\n      fetchData(){\n        let url = \"cart/cartList\";\n        this.$Request.get(url).then( res => {\n          if(res && res.code === 200){\n            this.goodsList = res.data.cartList;\n          }\n        })\n      },\n      //加入商品 参数 goods:商品数据\n      joinGoods(goods) {\n        /*\n         * 这里只是展示一种添加逻辑，模板并没有做从其他页面加入商品到购物车的具体动作，\n         * 在实际应用上，前端并不会直接插入记录到goodsList这一个动作，一般是更新列表和本地列表缓存。\n         * 一般商城购物车的增删改动作是由后端来完成的,\n         * 后端记录后返回前端更新前端缓存\n         */\n        let len = this.goodsList.length;\n        let isFind = false; //是否找到ID一样的商品\n        for (let i = 0; i < len; i++) {\n          let row = this.goodsList[i];\n          if (row.id == goods.id) { //找到商品一样的商品\n            this.goodsList[i].number++; //数量自增\n            isFind = true; //找到一样的商品\n            break; //跳出循环\n          }\n        }\n        if (!isFind) {\n          //没有找到一样的商品，新增一行到购物车商品列表头部\n          this.goodsList[i].unshift(goods);\n        }\n      },\n      //控制左滑删除效果-begin\n      touchStart(index, event) {\n        //多点触控不触发\n        if (event.touches.length > 1) {\n          this.isStop = true;\n          return;\n        }\n        this.oldIndex = this.theIndex;\n        this.theIndex = null;\n        //初始坐标\n        this.initXY = [event.touches[0].pageX, event.touches[0].pageY];\n      },\n      touchMove(index, event) {\n        //多点触控不触发\n        if (event.touches.length > 1) {\n          this.isStop = true;\n          return;\n        }\n        let moveX = event.touches[0].pageX - this.initXY[0];\n        let moveY = event.touches[0].pageY - this.initXY[1];\n\n        if (this.isStop || Math.abs(moveX) < 5) {\n          return;\n        }\n        if (Math.abs(moveY) > Math.abs(moveX)) {\n          // 竖向滑动-不触发左滑效果\n          this.isStop = true;\n          return;\n        }\n\n        if (moveX < 0) {\n          this.theIndex = index;\n          this.isStop = true;\n        } else if (moveX > 0) {\n          if (this.theIndex != null && this.oldIndex == this.theIndex) {\n            this.oldIndex = index;\n            this.theIndex = null;\n            this.isStop = true;\n            setTimeout(() => {\n              this.oldIndex = null;\n            }, 150)\n          }\n        }\n      },\n      touchEnd(index, $event) {\n        //结束禁止触发效果\n        this.isStop = false;\n      },\n      //跳转确认订单页面\n      toConfirmation() {\n        let tmpList = [];\n        this.goodsList.forEach( item => {\n        \t item.goods_list.forEach(childItem => {\n        \t\t if(childItem.selected == true){\n        \t\t\ttmpList.push(childItem);\n        \t\t } \n        \t })\n        })\n        if (tmpList.length < 1) {\n          uni.showToast({\n            title: '请选择商品结算',\n            icon: 'none'\n          });\n          return;\n        }\n        uni.setStorage({\n          key: 'buylist',\n          data: tmpList,\n          success: () => {\n            uni.navigateTo({\n              url: '/pages/tabBar/shCart/confirmation/confirmation'\n            })\n          }\n        })\n      },\n      //删除商品\n      deleteGoods(id,storeIndex) {\n        \n        // 根据父级索引 获取到商家店铺产品\n        let goodsItem = this.goodsList[storeIndex].goods_list;\n        \n        let url = \"cart/delCartInfo\";\n        let data = {\n           \"id\":id\n         }\n         this.$Request.post(url,data).then(res => {\n           \n           if(res && res.code == 200){\n             \n             uni.showToast({\n               title:res.msg,\n               icon:\"none\"\n             })\n             \n              for (let i = 0; i < goodsItem.length; i++) {\n               //根据id获取具体产品\n               if (id == goodsItem[i].id) { \n                 //删除具体产品\n                   goodsItem.splice(i, 1);\n                 break;\n               }\n             }\n             \n             //店铺商品删除完后 需要删除店铺信息\n              if(goodsItem.length === 0){\n               let del = this.goodsList.indexOf(this.goodsList[storeIndex]);\n               this.goodsList.splice(del,1);\n             }\n             \n             this.sum();\n             this.oldIndex = null;\n             this.theIndex = null;\n           }\n         }) \n      },\n      // 选中商品\n      selected(index,storeIndex) {\n        \n        this.goodsList[storeIndex].goods_list[index].selected = this.goodsList[storeIndex].goods_list[index].selected ? false : true;\n        \n                \n        //门店商品全部点击完以后，需要将门店的选项按钮显示高亮\n        let allSelect =  this.goodsList[storeIndex].goods_list.every( item => {\n          return item.selected;\n        })\n        \n        this.goodsList[storeIndex].selected = allSelect;\n        \n        this.sum();\n      },\n\t\t\t//店铺按钮选择\n\t\t\tselectedStore(index) {\n\t\t\t\t\n\t\t\t let storeSelecte =  this.goodsList[index].selected = !this.goodsList[index].selected;\n\t\t\t  \n\t\t\t  var goods = this.goodsList[index].goods_list;\n\t\t\t  \n\t\t\t  for(var i = 0; i < goods.length;i++){\n\t\t\t    \n\t\t\t    goods[i].selected = storeSelecte;\n\t\t\t    \n\t\t\t  }\n\t\t\t\tthis.sum();\n\t\t\t},\n      //全选\n      allSelect() {\n\n\t\t\t\tlet allSelect = this.isAllselected = !this.isAllselected;\n\t\t\t\t\n\t\t\t\tthis.goodsList.forEach( item => {\n\t\t\t\t\t item.selected = allSelect;\n\t\t\t\t\t item.goods_list.forEach(childItem => {\n\t\t\t\t\t\t childItem.selected = allSelect;\n\t\t\t\t\t })\n\t\t\t\t})\n\t\t\t\t\n        this.sum();\n      },\n      // 减少数量\n      sub(index,storeIndex) {\n        let li = this.goodsList[storeIndex].goods_list[index];\n        if(!li.selected){\n          uni.showToast({\n            title:\"请选择商品\",\n            icon:\"none\"\n          })\n          return;   \n        }else{\n           if (li.goods_num <= 1) {\n            return;\n          }\n          li.goods_num--;\n           let url = \"cart/modifyCartInfo\";\n           let data = {\n              \"id\":li.id,\n              \"selected\":li.selected,\n              \"goods_num\":li.goods_num\n            }\n            this.$Request.post(url,data).then(res => {\n              if(res && res.code == 200){\n                uni.showToast({\n                  title:res.msg,\n                  icon:\"none\"\n                })\n              }\n            })\n          }\n       this.sum();\n      },\n      // 增加数量\n      add(index,storeIndex) {\n        \n        let li = this.goodsList[storeIndex].goods_list[index];\n        \n        if(!li.selected){\n           uni.showToast({\n             title:\"请选择商品\",\n             icon:\"none\"\n           })\n           return;   \n           \n         }else{\n           \n            li.goods_num++;\n            let url = \"cart/modifyCartInfo\";\n            let data = {\n               \"id\":li.id,\n               \"selected\":li.selected,\n               \"goods_num\":li.goods_num\n             }\n             this.$Request.post(url,data).then(res => {\n               if(res && res.code == 200){\n                 uni.showToast({\n                   title:res.msg,\n                   icon:\"none\"\n                 })\n               }\n             })\n           }\n        this.sum();\n      },\n      // 合计\n      sum() {\n        this.sumPrice = 0;\t\t\n            \n\t\t\t\tthis.goodsList.forEach( item => {\n\t\t\t\t\t item.goods_list.forEach(childItem => {\n\t\t\t\t\t\t if(childItem.selected){\n\t\t\t\t\t\t\t this.sumPrice += childItem.goods_num*childItem.goods_price;\n\t\t\t\t\t\t } \n\t\t\t\t\t })\n\t\t\t\t})\n\t\t\t\t\n      },\n      discard() {\n        //丢弃\n      }\n    }\n  }\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./shCart.vue?vue&type=template&id=96c447aa&scoped=true&\"\nimport script from \"./shCart.vue?vue&type=script&lang=js&\"\nexport * from \"./shCart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shCart.vue?vue&type=style&index=0&id=96c447aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"96c447aa\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('96c447aa', component.options)\n    } else {\n      api.reload('96c447aa', component.options)\n    }\n    module.hot.accept(\"./shCart.vue?vue&type=template&id=96c447aa&scoped=true&\", function () {\n      api.rerender('96c447aa', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/GithubDemo/2019a005/pages/tabBar/shCart/shCart.vue\"\nexport default component.exports","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./shCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./shCart.vue?vue&type=script&lang=js&\"","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./shCart.vue?vue&type=style&index=0&id=96c447aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./shCart.vue?vue&type=style&index=0&id=96c447aa&lang=scss&scoped=true&\"","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./shCart.vue?vue&type=template&id=96c447aa&scoped=true&\""],"sourceRoot":""}